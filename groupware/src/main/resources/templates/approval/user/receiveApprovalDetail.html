<!DOCTYPE html>
<html lang="en" dir="ltr" data-bs-theme="light"
	data-color-theme="Blue_Theme" data-layout="horizontal"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{/include/layout}">

<th:block layout:fragment="content">
	<div class="container-fluid px-4">
		<!-- Breadcrumb -->
		<div class="col-lg-8 col-md-6 col-12 align-self-center">
			<nav aria-label="breadcrumb">
				<ol class="breadcrumb align-items-center">
					<li class="breadcrumb-item"><a
						class="text-muted text-decoration-none" th:href="@{/home}"> <i
							class="ti ti-home fs-5"></i>
					</a></li>
					<li class="breadcrumb-item" aria-current="page">전자 결재 시스템</li>
					<li class="breadcrumb-item active" aria-current="page">받은 문서함</li>
				</ol>
			</nav>
			<br>
			<h2 class="mb-0 fw-bolder fs-8">전자 결재 시스템</h2>
		</div>
		<br>

		<!-- Tabs -->
		<ul class="nav nav-tabs mb-4">
			<li class="nav-item"><a class="nav-link" th:href="@{/approval}">보낸
					문서함</a></li>
			<li class="nav-item"><a class="nav-link active"
				th:href="@{/approval/receive}">받은 문서함</a></li>
			<li class="nav-item"><a class="nav-link"
				th:href="@{/approval/create}">결재 작성</a></li>
		</ul>

		<div class="container-fluid px-4">
			<div class="card p-4 shadow-sm border-0 rounded-4 mb-4">
				<input type="hidden" name="appr_sender"
					th:value="${#authentication.principal.member.memberNo}">

				<h4 id="approval_form_name" class="fw-bold text-center mb-4"
					th:text="${approval.approvalForm.approvalFormName}">양식 제목</h4>

				<table class="table table-bordered align-middle">
					<tbody>
						<tr>
							<th class="text-center bg-light" style="width: 15%;">기안자</th>
							<td style="width: 20%;" th:text="${approval.member.memberName}"></td>
							<th class="text-center bg-light" style="width: 15%;">부서</th>
							<td style="width: 20%;"
								th:text="${approval.member.dept.deptName}"></td>
							<th class="text-center bg-light" style="width: 15%;">직급</th>
							<td style="width: 20%;" th:text="${approval.member.pos.posName}"></td>
						</tr>
						<tr>
							<th class="text-center bg-light">제목</th>
							<td colspan="5">
								<div th:text="${approval.apprTitle}"></div>
							</td>
						</tr>
						<tr>
							<th class="text-center bg-light">작성일</th>
							<td colspan="2"><div th:text="${approval.apprRegDate}"></div></td>
							<th class="text-center bg-light">일시</th>
							<td><div th:text="${approval.startDate}"></div></td>
							<td><div th:text="${approval.endDate}"></div></td>
						</tr>
						<tr>
							<th class="text-center bg-light">결재자</th>
							<td colspan="5"><th:block
									th:if="${!#lists.isEmpty(approverList)}"
									th:each="approver : ${approverList}">
									<span
										th:text="|${approver.member.memberName} ${approver.member.pos.posName} (${approver.member.dept.deptName}) |"></span>
								</th:block></td>
						</tr>
						<tr>
							<th class="text-center bg-light">참조자</th>
							<td colspan="2"><th:block
									th:if="${!#lists.isEmpty(referencerList)}"
									th:each="referencer : ${referencerList}">
									<span
										th:text="|${referencer.member.memberName} ${referencer.member.pos.posName} (${referencer.member.dept.deptName}) |"></span>
								</th:block></td>
							<th class="text-center bg-light">합의자</th>
							<td colspan="2"><th:block
									th:if="${!#lists.isEmpty(agreementerList)}"
									th:each="agreementer : ${agreementerList}">
									<span
										th:text="|${agreementer.member.memberName} ${agreementer.member.pos.posName} (${agreementer.member.dept.deptName}) |"></span>
								</th:block></td>
						</tr>
						<tr>
							<th class="text-center bg-light">첨부 파일</th>
							<td colspan="5">파일 내용 추가 예정</td>
						</tr>
					</tbody>
				</table>

				<!-- 동적 양식 영역 -->
				<div id="approval-content" class="mb-4"
					th:utext="${approval.apprText}"></div>

				<!-- 전자결재 테이블 -->
				<h5 class="fw-bold mb-3">결재 상태</h5>
				<div class="table-responsive">
					<p th:if="${!#lists.isEmpty(approverList)}">결재자</p>
					<table class="table table-bordered text-center align-middle">
						<thead class="table-light">
							<tr>
								<th:block th:if="${!#lists.isEmpty(approverList)}"
									th:each="approver : ${approverList}">
									<th><span class="fw-normal text-muted"
										th:text="|${approver.member.memberName} ${approver.member.pos.posName} (${approver.member.dept.deptName})|">홍길동</span></th>
								</th:block>
							</tr>
						</thead>
						<tbody>
							<tr>
								<th:block th:if="${!#lists.isEmpty(approverList)}"
									th:each="approver : ${approverList}">
									<td th:if="${approver.approverDecisionStatus == 'C'}"><img
										src="" alt="결재자 서명" class="img-fluid border rounded"
										style="max-height: 80px;"></td>
									<td th:if="${approver.approverDecisionStatus != 'C'}"></td>
								</th:block>
							</tr>
							<tr></tr>
							<tr></tr>
							<tr></tr>
						</tbody>
					</table>
				</div>
				<div class="table-responsive">
					<p th:if="${!#lists.isEmpty(agreementerList)}">합의자</p>
					<table class="table table-bordered text-center align-middle">
						<thead class="table-light">
							<tr>
								<th:block th:if="${!#lists.isEmpty(agreementerList)}"
									th:each="agreementer : ${agreementerList}">
									<th><span class="fw-normal text-muted"
										th:text="|${agreementer.member.memberName} ${agreementer.member.pos.posName} (${agreementer.member.dept.deptName})|">홍길동</span></th>
								</th:block>
							</tr>
						</thead>
						<tbody>
							<tr>
								<th:block th:if="${!#lists.isEmpty(agreementerList)}"
									th:each="agreementer : ${agreementerList}">
									<td th:if="${agreementer.agreementerAgreeStatus == 'C'}"><img
										src="" alt="결재자 서명" class="img-fluid border rounded"
										style="max-height: 80px;"></td>
									<td th:if="${agreementer.agreementerAgreeStatus != 'C'}"></td>
								</th:block>
							</tr>
						</tbody>
					</table>
				</div>
				<div class="table-responsive">
					<p th:if="${!#lists.isEmpty(referencerList)}">참조자</p>
					<table class="table table-bordered text-center align-middle">
						<thead class="table-light">
							<tr>
								<th:block th:if="${!#lists.isEmpty(referencerList)}"
									th:each="referencer : ${referencerList}">
									<th>참조자</th>
								</th:block>
							</tr>
						</thead>
						<tbody>
							<tr>
								<th:block th:if="${!#lists.isEmpty(referencerList)}"
									th:each="referencer : ${referencerList}">
									<td><span class="fw-normal text-muted"
										th:text="|${referencer.member.memberName} ${referencer.member.pos.posName} (${referencer.member.dept.deptName})|">홍길동</span></td>
								</th:block>
							</tr>
						</tbody>
					</table>
				</div>
				<div class="d-flex justify-content-end gap-2">
					<button class="btn btn-primary px-4">승인</button>
					<button class="btn btn-danger px-4">반려</button>
				</div>
			</div>
		</div>
	</div>

	<script>
		
	</script>



	<!-- Import vendorJs Files -->
	<script th:src="@{/assets/js/vendor.min.js}"></script>

	<!-- Import Js Files -->
	<script
		th:src="@{/assets/libs/bootstrap/dist/js/bootstrap.bundle.min.js}"></script>
	<script th:src="@{/assets/libs/simplebar/dist/simplebar.min.js}"></script>
	<script th:src="@{/assets/js/theme/app.init.js}"></script>
	<script th:src="@{/assets/js/theme/theme.js}"></script>
	<script th:src="@{/assets/js/theme/app.min.js}"></script>
	<script th:src="@{/assets/js/theme/sidebarmenu.js}"></script>

	<!-- solar icons -->
	<script
		src="https://cdn.jsdelivr.net/npm/iconify-icon@1.0.8/dist/iconify-icon.min.js"></script>
	<script th:src="@{/assets/libs/owl.carousel/dist/owl.carousel.min.js}"></script>
	<script th:src="@{/assets/libs/apexcharts/dist/apexcharts.min.js}"></script>
	<script th:src="@{/assets/js/dashboards/dashboard.js}"></script>

	<!-- Bootstrap Common JS Files End -->
</th:block>
</html>

<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
layout:decorate="~{/include/layout}">

<th:block layout:fragment="content">
<!--상단 홈 아이콘 / ...  -->
	<div class="col-lg-8 col-md-6 col-12 align-self-center">
          <nav aria-label="breadcrumb">
              <ol class="breadcrumb align-items-center">
                 <li class="breadcrumb-item">
                   <a class="text-muted text-decoration-none" th:href="@{/home}">
                     <i class="ti ti-home fs-5"></i>
                    </a>
                 </li>
              <li class="breadcrumb-item" aria-current="page">게시글 상세/댓글</li>
               </ol>
           </nav><br>
    <h2 class="mb-0 fw-bolder fs-8">게시글 상세 정보</h2>
    </div><br>

        <h2 class="text-center mb-4 fw-bolder fs-5" th:text="${board.board_title}">게시글 제목</h2>
        <div class="text-center mb-3">
            <i class="ti ti-eye"></i> <span th:text="${board.views}">0</span>
            <span th:text="${#temporals.format(board.reg_date, 'yyyy-MM-dd')}">등록일</span>
        </div>

        <section>
            <div id="section_wrap">
                <div class="board_detail">
                    <div th:utext="${board.board_content}">게시글 내용</div>
                </div><br><br>
        <hr>

                <div class="buttons text-end">
                    <a class="btn btn-primary" th:href="@{/board/{id}/update(id=${board.board_no})}">수정</a>
					<a class="btn btn-danger" th:onclick="|boardDelete('${board.board_no}')|">삭제</a>
                </div>
            </div>
        </section>


        <div class="comments-section">
            <h4>댓글</h4>
            <div id="comments-container">
                <!-- 댓글 목록이 여기에 동적으로 추가됩니다. -->
            </div>

            <div class="comment-input">
                <textarea id="commentText" rows="3" placeholder="댓글을 입력하세요..." class="form-control"></textarea>
                <button class="btn btn-primary mt-2" onclick="submitComment()">댓글 작성</button>
            </div>
        </div>

    <script>
    const boardDelete = function(el) {
        const board_no = el.getAttribute("data-board-no");
        if (confirm("게시글을 삭제하시겠습니까?")) {
            fetch('/board/' + board_no, {
                method: 'DELETE'
            })
            .then(response => response.json())
            .then(data => {
                alert(data.res_msg);
                if (data.res_code == '200') {
                    location.href = "/board/list";
                }
            });
        }
    }
    </script>

    <!-- Bootstrap Common JS Files Start -->
    <script th:src="@{/assets/js/vendor.min.js}"></script>
    <script th:src="@{/assets/libs/bootstrap/dist/js/bootstrap.bundle.min.js}"></script>
    <script th:src="@{/assets/libs/simplebar/dist/simplebar.min.js}"></script>
    <script th:src="@{/assets/js/theme/app.init.js}"></script>
    <script th:src="@{/assets/js/theme/theme.js}"></script>
    <script th:src="@{/assets/js/theme/app.min.js}"></script>
    <script th:src="@{/assets/js/theme/sidebarmenu.js}"></script>
    <script src="https://cdn.jsdelivr.net/npm/iconify-icon@1.0.8/dist/iconify-icon.min.js"></script>
    <!-- Bootstrap Common JS Files End -->
</th:block>
</html>
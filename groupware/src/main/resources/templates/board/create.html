<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{/include/layout}">

<th:block layout:fragment="content">
			<!--ìƒë‹¨ í™ˆ ì•„ì´ì½˜ / ...  -->
	<div class="col-lg-8 col-md-6 col-12 align-self-center">
          <nav aria-label="breadcrumb">
              <ol class="breadcrumb align-items-center">
                 <li class="breadcrumb-item">
                   <a class="text-muted text-decoration-none" th:href="@{/home}">
                     <i class="ti ti-home fs-5"></i>
                    </a>
                 </li>
              <li class="breadcrumb-item" aria-current="page">ììœ ê²Œì‹œíŒ</li>
               </ol>
           </nav><br>
    <h2 class="mb-0 fw-bolder fs-8">ììœ  ê²Œì‹œíŒ ì‘ì„±</h2>
    </div><br>

  <!-- Summernote CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote-lite.min.css">


    <form th:action="@{/board/create}" method="post" enctype="multipart/form-data" id="board_form">

      <!-- ì œëª© + íˆ¬í‘œ ë²„íŠ¼ -->
      <div class="mb-3">
        <div class="d-flex justify-content-between align-items-end">
          <label class="form-label mb-0"><strong>ì œëª©</strong></label>
          <button type="button" class="btn btn-outline-primary btn-sm" onclick="addVote()">íˆ¬í‘œ ì¶”ê°€</button>
        </div>
        <input type="text" class="form-control mt-1" id="board_title" name="board_title" maxlength="100" placeholder="ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”">
        <!--íŠ¸ëœì­ì…˜ ì²˜ë¦¬ í•˜ê¸°ìœ„í•´ì„œ ì¶”ê°€í•¨ -->
        <input type="hidden" name="board_writer" value="11">
		<input type="file" name="files" multiple><br>
      </div>

	<!-- íŒŒì¼ ì²¨ë¶€ ì œëª© -->
	<div class="mb-3">
  		<label class="form-label mb-1"><strong>íŒŒì¼ ì²¨ë¶€</strong></label>

  	<!-- ë“œë˜ê·¸ ì•¤ ë“œë¡­ ë°•ìŠ¤ -->
<div class="dropzone mt-2" id="dropzone" style="border: 1px dashed #ccc; padding: 20px; text-align: center; border-radius: 10px;">
  <p class="mb-0" id="dropzone_hint">
    ì—¬ê¸°ì— íŒŒì¼ì„ ëŒì–´ë‹¤ ë†“ê±°ë‚˜ 
    <span id="file_trigger" style="color: #0d6efd; text-decoration: underline; cursor: pointer;">íŒŒì¼ ì¶”ê°€</span>ë¥¼ ëˆ„ë¥´ì„¸ìš”.
  </p>
  <input type="file" id="file_input" multiple style="display: none;" />
  <ul id="file_list" style="list-style: none; padding-left: 0; margin-top: 10px;"></ul>
</div>
</div>

      <!-- ë‚´ìš© + Summernote -->
      <div class="mb-3">
        <label class="form-label" for="board_content"><strong>ë‚´ìš©</strong></label>
        <textarea id="board_content" name="board_content"></textarea>
      </div>

      <!-- ì‘ì„± / ì„ì‹œì €ì¥ ë²„íŠ¼ -->
   <div class="d-flex justify-content-end gap-2 mt-4">
    <button type="submit" class="btn btn-primary">ì‘ì„± ì™„ë£Œ</button>
    <button type="button" class="btn btn-secondary" onclick="saveTemp()">ì„ì‹œì €ì¥</button>
  </div>

    </form>

  <!-- jQuery + Summernote JS -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote-lite.min.js"></script>



  <!-- Summernote & ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì´ˆê¸°í™” -->
  <script>
    $('#board_content').summernote({
      height: 300,
      lang: 'ko-KR',
      placeholder: '300ì ì´ë‚´ë¡œ ì…ë ¥í•˜ì„¸ìš”',
      width: '100%',
      callbacks: {
        onImageUpload: function(files) {
          let data = new FormData();
          data.append("file", files[0]);
          $.ajax({
            url: "/board/uploadImage",
            method: "POST",
            data: data,
            processData: false,
            contentType: false,
            success: function(result) {
              $('#board_content').summernote('insertImage', result.url);
            }
          });
        }
      }
    });

    const dropzone = document.getElementById("dropzone");
    const fileInput = document.getElementById("file_input");
    const fileTrigger = document.getElementById("file_trigger");
    const fileList = document.getElementById("file_list");
    const dropzoneHint = document.getElementById("dropzone_hint");

    // ğŸ”¹ íŒŒì¼ ëª©ë¡ ì¶œë ¥ + íŒíŠ¸ ìˆ¨ê¸°ê¸°
    function displayFiles(files) {
      if (files.length > 0) {
        dropzoneHint.style.display = "none"; // ì•ˆë‚´ ë¬¸êµ¬ ìˆ¨ê¹€
      }

      for (let file of files) {
        const li = document.createElement("li");
        li.textContent = file.name;
        fileList.appendChild(li);
      }
    }

    // ë“œë˜ê·¸ ê´€ë ¨ ì´ë²¤íŠ¸
    dropzone.addEventListener("dragover", function(e) {
      e.preventDefault();
      dropzone.style.backgroundColor = "#f1f1f1";
    });

    dropzone.addEventListener("dragleave", function(e) {
      e.preventDefault();
      dropzone.style.backgroundColor = "white";
    });

    dropzone.addEventListener("drop", function(e) {
      e.preventDefault();
      dropzone.style.backgroundColor = "white";
      const files = e.dataTransfer.files;
      displayFiles(files);
    });

    // íŒŒì¼ ì„ íƒ ë²„íŠ¼ í´ë¦­
    fileTrigger.addEventListener("click", function() {
      fileInput.click();
    });

    // íŒŒì¼ ì„ íƒ ì‹œ ì²˜ë¦¬
    fileInput.addEventListener("change", function() {
      displayFiles(fileInput.files);
    });

    function addVote() {
      alert("íˆ¬í‘œ ì¶”ê°€ ì¤€ë¹„ì¤‘!");
    }

    function saveTemp() {
      alert("ì„ì‹œì €ì¥ ì¤€ë¹„ì¤‘!");
    }
  </script>

<!-- Bootstrap Common JS Files Start -->

	<!-- Import vendorJs Files -->
	<script th:src="@{/assets/js/vendor.min.js}"></script>
	
  	<!-- Import Js Files -->
  	<script th:src="@{/assets/libs/bootstrap/dist/js/bootstrap.bundle.min.js}"></script>
  	<script th:src="@{/assets/libs/simplebar/dist/simplebar.min.js}"></script>
  	<script th:src="@{/assets/js/theme/app.init.js}"></script>
  	<script th:src="@{/assets/js/theme/theme.js}"></script>
  	<script th:src="@{/assets/js/theme/app.min.js}"></script>
  	<script th:src="@{/assets/js/theme/sidebarmenu.js}"></script>

  	<!-- solar icons -->
  	<script src="https://cdn.jsdelivr.net/npm/iconify-icon@1.0.8/dist/iconify-icon.min.js"></script>
  	<script th:src="@{/assets/libs/owl.carousel/dist/owl.carousel.min.js}"></script>
  	<script th:src="@{/assets/libs/apexcharts/dist/apexcharts.min.js}"></script>
  	<script th:src="@{/assets/js/dashboards/dashboard.js}"></script>
  	
  	<!-- Bootstrap Common JS Files End -->
</th:block>
</html>
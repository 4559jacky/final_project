<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{/include/layout}">
<th:block layout:fragment="content">
  <script th:src="@{/js/jquery-3.7.1.js}"></script>
  <div class="container-fluid">
  	<div class="col-lg-8 col-md-6 col-12 align-self-center">
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb align-items-center">
          <li class="breadcrumb-item">
            <a class="text-muted text-decoration-none" th:href="@{/home}">
              <i class="ti ti-home fs-5"></i>
            </a>
          </li>
          <li class="breadcrumb-item" aria-current="page">공유문서함</li>
        </ol>
      </nav><br>
      <h2 class="mb-0 fw-bolder fs-8">공유문서함</h2>
    </div><br>
    <div class="row">

      <!-- ✅ 왼쪽 사이드바 -->
      <div class="col-md-3 mb-4">
        <div class="bg-white p-3 rounded-3 shadow-sm">
          <h5 class="fw-bold mb-3">업무문서함</h5>
          <ul class="list-unstyled ps-2">
            <li class="mb-2">
              <span class="fw-semibold">📁 폴더 목록</span>
              <ul class="list-unstyled ps-3">
                <li>📂 <span class="text-danger fw-bold">개인업무 폴더</span></li>
                <li>📂 개인문서</li>
                <li>📂 공유문서</li>
              </ul>
            </li>
            <li class="mb-2 fw-semibold">📁 공유함 폴더</li>
            <li class="mb-2 fw-semibold">📄 공유함 파일</li>
            <li class="mb-2 fw-semibold">⭐ 즐겨찾기</li>
            <li class="mb-2 fw-semibold">🏖️ 휴지통</li>
          </ul>
          <div class="mt-4">
            <span class="d-block mb-1">1.32GB / 13GB</span>
            <div class="progress mb-2" style="height: 6px;">
              <div class="progress-bar bg-danger" style="width: 10%;"></div>
            </div>
            <button class="btn btn-sm btn-danger w-100">업무 용량 구매</button>
          </div>
        </div>
      </div>

      <!-- ✅ 오른쪽 메인 콘텐츠 -->
      <div class="col-md-9">
        <div class="bg-white p-4 rounded-4 shadow-sm">
          <h5 class="fw-bold mb-4">개인업무 폴더함</h5>

          <div class="mb-3">
            <ul class="nav nav-pills">
              <li class="nav-item">
                <a class="nav-link active" href="#">개인업무 폴더함</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">부서업무 폴더함</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">공유업무 폴더함</a>
              </li>
            </ul>
          </div>

          <div class="row g-2 align-items-center mb-4">
            <div class="col-auto">
              <select class="form-select form-select-sm">
                <option>작성자</option>
              </select>
            </div>
            <div class="col-auto">
              <select class="form-select form-select-sm">
                <option>등록일</option>
              </select>
            </div>
            <div class="col-auto">
              <input type="date" class="form-control form-control-sm" />
            </div>
            <div class="col-auto">
              <input type="date" class="form-control form-control-sm" />
            </div>
            <div class="col-auto">
              <input type="text" class="form-control form-control-sm" placeholder="파일명" />
            </div>
            <div class="col-auto">
              <button class="btn btn-sm btn-primary"><i class="ti ti-search me-1"></i>검색</button>
            </div>
          </div>

          <div class="d-flex gap-2 flex-wrap mb-3">
            <input type="file" name="file" id="fileInput" class="d-none" onchange="uploadFile(this.files[0])">
            <button type="button" class="btn btn-sm btn-outline-primary" onclick="document.getElementById('fileInput').click()"><i class="ti ti-upload me-1"></i>업로드</button>
            <button class="btn btn-sm btn-outline-secondary">📁 새폴더</button>
            <button class="btn btn-sm btn-outline-secondary">🔁 이동 to</button>
            <button class="btn btn-sm btn-outline-secondary">⚙️ 파일공유설정</button>
            <button class="btn btn-sm btn-outline-danger">🗑 삭제</button>
          </div>

          <div class="table-responsive">
            <table class="table table-hover align-middle">
              <thead class="table-light">
                <tr>
                  <th style="width: 5%;"><input type="checkbox" /></th>
                  <th>폴더/파일명</th>
                  <th style="width: 10%;">공유여부</th>
                  <th style="width: 15%;">공유설정</th>
                  <th style="width: 10%;">크기</th>
                  <th style="width: 15%;">등록일</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><input type="checkbox" /></td>
                  <td>📁 개인문서</td>
                  <td>공유안함</td>
                  <td>—</td>
                  <td>—</td>
                  <td>2018.03.30</td>
                </tr>
                <tr>
                  <td><input type="checkbox" /></td>
                  <td>📁 공유문서</td>
                  <td>공유</td>
                  <td>🔗</td>
                  <td>—</td>
                  <td>2018.03.30</td>
                </tr>
                <tr>
                  <td><input type="checkbox" /></td>
                  <td>⭐ 국세자료.docx</td>
                  <td>공유안함</td>
                  <td>🔗</td>
                  <td>12 KB</td>
                  <td>2018.03.13</td>
                </tr>
              </tbody>
            </table>
          </div>

          <nav>
            <ul class="pagination pagination-sm justify-content-center">
              <li class="page-item disabled">
                <a class="page-link">‹</a>
              </li>
              <li class="page-item active">
                <a class="page-link">1</a>
              </li>
              <li class="page-item">
                <a class="page-link">›</a>
              </li>
            </ul>
          </nav>
        </div>
      </div>
    </div>
  </div>
  <script>
    function uploadFile(file){
      if(!file) return;
      const formData = new FormData();
      formData.append("file", file);
      fetch("/shared/file/upload",{
        method: "POST",
        headers : {
          'header': document.querySelector('meta[name="_csrf_header"]').content,
          'X-CSRF-Token': document.querySelector('meta[name="_csrf"]').content
        },
        body: formData
      })
      .then(response => response.json())
      .then(data => {
        alert(data.res_msg);
        if(data.res_code === "200") location.reload();
      })
      .catch(err => {
        console.error("파일 업로드 실패", err);
        alert("파일 업로드 중 오류가 발생했습니다.");
      });
    }
  </script>
	
	
	<!-- ---------------------------------------------------------------------------- -->
	
	<!-- Custom JS Files -->
	
	
	
	<!-- Bootstrap Common JS Files Start -->

	<!-- Import vendorJs Files -->
	<script th:src="@{/assets/js/vendor.min.js}"></script>
	
  	<!-- Import Js Files -->
  	<script th:src="@{/assets/libs/bootstrap/dist/js/bootstrap.bundle.min.js}"></script>
  	<script th:src="@{/assets/libs/simplebar/dist/simplebar.min.js}"></script>
  	<script th:src="@{/assets/js/theme/app.init.js}"></script>
  	<script th:src="@{/assets/js/theme/theme.js}"></script>
  	<script th:src="@{/assets/js/theme/app.min.js}"></script>
  	<script th:src="@{/assets/js/theme/sidebarmenu.js}"></script>

  	<!-- solar icons -->
  	<script src="https://cdn.jsdelivr.net/npm/iconify-icon@1.0.8/dist/iconify-icon.min.js"></script>
  	<script th:src="@{/assets/libs/owl.carousel/dist/owl.carousel.min.js}"></script>
  	<script th:src="@{/assets/libs/apexcharts/dist/apexcharts.min.js}"></script>
  	<script th:src="@{/assets/js/dashboards/dashboard.js}"></script>
  	
  	<!-- Bootstrap Common JS Files End -->
  	
  	<!-- Custom JS Files -->
  	
  	
  	
</th:block>
</html>